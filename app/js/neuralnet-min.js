function sigma(e){return 1/(1+exp(-e))}function dot(e,t){var n=min(e.length,t.length),r=0;for(var i=0;i<n;i++){r+=e[i]*t[i]}return r}function Neuron(e){this.weights=Array(e);for(var t=0;t<e;t++){this.weights[t]=random()-.5}this._out=null;this.bias=random()-.5}function NeuralNetwork(e,t,n,r,i,s){i=i||1;s=s||1;r=r||.99975;t=t||floor(2*e/3);n=n||1;this.alpha=i;this.eta=s;this.hidden=Array(t);for(var o=0;o<t;o++){this.hidden[o]=new Neuron(e)}this.output=Array(n);for(var o=0;o<n;o++){this.output[o]=new Neuron(t)}this.updatecount=0}var exp=Math.exp,random=Math.random,min=Math.min,floor=Math.floor;Neuron.prototype.activate=function(e,t){if(e.length!==this.weights.length){throw"Warning: Incorrect number of inputs ("+e.length+")"}else{var n=sigma(this.bias+dot(this.weights,e));this._out=t?n:null;return n}};NeuralNetwork.prototype.predict=function(e,t){var n=Array(this.hidden.length),r=Array(this.output.length);for(var i=0;i<n.length;i++){n[i]=this.hidden[i].activate(e,t)}for(var s=0;s<r.length;s++){r[s]=this.output[s].activate(n,t)}return r};NeuralNetwork.prototype.update=function(e,t){var n=this.alpha,r=this.eta,i=this.hidden.length,s=this.output.length,o=this.predict(e,true),u=this.output,a=this.hidden;var f=Array(s);for(var l=0;l<s;l++){var c=o[l];f[l]=c*(1-c)*(c-t[l])}var h=Array(i);for(var p=0;p<i;p++){var d=a[p]._out;var v=0;for(var l=0;l<s;l++){v+=f[l]*u[l].weights[p]}h[p]=d*(1-d)*v}for(var l=0;l<u.length;l++){var m=u[l],g=r*f[l];m.bias=n*m.bias-g;for(var p=0;p<i;p++){var d=a[p]._out;m.weights[p]=n*m.weights[p]-g*d}}for(var p=0;p<i;p++){var y=h[p],b=a[p],g=r*y;b.bias=n*b.bias-g;for(var w=0;w<e.length;w++){b.weights[w]=n*b.weights[w]-g*e[w]}}this.updatecount++;r*=this.decay}